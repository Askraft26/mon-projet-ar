<!DOCTYPE html>
<html>
  <head>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <!-- A-Frame -->
    <script src="https://aframe.io/releases/1.4.0/aframe.min.js"></script>
    <!-- AR.js pour la rÃ©alitÃ© augmentÃ©e -->
    <script src="https://raw.githack.com/AR-js-org/AR.js/master/aframe/build/aframe-ar.js"></script>
    <!-- Shader pour GIF animÃ©s -->
    <script src="https://rawgit.com/mayognaise/aframe-gif-shader/master/dist/aframe-gif-shader.min.js"></script>
  </head>

  <body style="margin: 0; overflow: hidden;">
    <!-- Bouton pour activer le son -->
    <button id="unmuteBtn" style="position:fixed;top:10px;left:50%;transform:translateX(-50%);z-index:999;padding:10px 20px;">
      ðŸ”Š Activer le son
    </button>

    <a-scene embedded arjs="sourceType: webcam; debugUIEnabled: false;">
      <a-assets>
        <!-- VidÃ©o principale (renommÃ©e sans espaces pour Ã©viter les erreurs) -->
        <video id="vid" src="whatsapp-video.mp4" autoplay loop muted playsinline crossorigin="anonymous"></video>

        <!-- GIFs de feux dâ€™artifice -->
        <img id="firework1" src="firework-7791_256.gif">
        <img id="firework2" src="https://media.giphy.com/media/3oEjI6SIIHBdRxXI40/giphy.gif">
        <img id="firework3" src="https://media.giphy.com/media/l41lTjJ9fXzS8yS0M/giphy.gif">
      </a-assets>

      <a-marker preset="hiro">
        <!-- VidÃ©o affichÃ©e sur le marker -->
        <a-video id="videoPlane" src="#vid" width="2" height="1.2" position="0 0 0" rotation="-90 0 0"></a-video>

        <!-- Feux dâ€™artifice autour -->
        <a-entity geometry="primitive: plane; width: 1.5; height: 1.5"
                  position="-2 1 -1" rotation="-90 0 0"
                  material="shader: gif; src: #firework1; transparent: true; opacity: 0.9">
        </a-entity>

        <a-entity geometry="primitive: plane; width: 1.2; height: 1.2"
                  position="2 1.5 -1" rotation="-90 0 0"
                  material="shader: gif; src: #firework2; transparent: true; opacity: 0.9">
        </a-entity>

        <a-entity geometry="primitive: plane; width: 1; height: 1"
                  position="0 2 -2" rotation="-90 0 0"
                  material="shader: gif; src: #firework3; transparent: true; opacity: 0.9">
        </a-entity>
      </a-marker>

      <a-entity camera></a-entity>
    </a-scene>

    <script>
      const vid = document.querySelector("#vid");
      const btn = document.querySelector("#unmuteBtn");

      // Activer le son aprÃ¨s interaction
      btn.addEventListener("click", () => {
        vid.muted = false;
        vid.play();
        btn.style.display = "none";
      });
    </script>
  </body>
</html>
